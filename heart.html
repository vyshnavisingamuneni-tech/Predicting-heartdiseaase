<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Heart Disease Prediction</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f9f9f9;
    padding: 20px;
  }
  .container {
    max-width: 420px;
    margin: auto;
    background: white;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 0 10px #ccc;
  }
  h1, h2 {
    text-align: center;
    color: #5C6AC4;
  }
  form {
    display: flex;
    flex-direction: column;
  }
  label {
    margin-top: 15px;
    font-weight: bold;
  }
  input, select, button {
    margin-top: 5px;
    padding: 8px;
    font-size: 1rem;
  }
  button {
    margin-top: 25px;
    background-color: #5C6AC4;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  button:hover {
    background-color: #4957a1;
  }
  #resultSection {
    margin-top: 30px;
    text-align: center;
    display: none;
  }
  #resultText {
    margin-top: 15px;
    font-size: 1.2rem;
    font-weight: bold;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Heart Disease Prediction</h1>
    <form id="predictionForm">
      <label for="age">Age:</label>
      <input type="number" id="age" name="age" min="1" max="120" required />

      <label for="sex">Sex:</label>
      <select id="sex" name="sex" required>
        <option value="">--Select--</option>
        <option value="1">Male</option>
        <option value="0">Female</option>
      </select>

      <label for="cp">Chest Pain Type:</label>
      <select id="cp" name="cp" required>
        <option value="">--Select--</option>
        <option value="0">Typical Angina</option>
        <option value="1">Atypical Angina</option>
        <option value="2">Non-anginal Pain</option>
        <option value="3">Asymptomatic</option>
      </select>

      <label for="bp">Resting Blood Pressure (mm Hg):</label>
      <input type="number" id="bp" name="bp" min="50" max="250" required />

      <label for="chol">Cholesterol (mg/dl):</label>
      <input type="number" id="chol" name="chol" min="100" max="600" required />

      <label for="fbs">Fasting Blood Sugar > 120 mg/dl:</label>
      <select id="fbs" name="fbs" required>
        <option value="">--Select--</option>
        <option value="1">True</option>
        <option value="0">False</option>
      </select>

      <label for="restecg">Resting Electrocardiographic Results:</label>
      <select id="restecg" name="restecg" required>
        <option value="">--Select--</option>
        <option value="0">Normal</option>
        <option value="1">ST-T wave abnormality</option>
        <option value="2">Probable/definite left ventricular hypertrophy</option>
      </select>

      <button type="submit">Predict</button>
    </form>

    <div id="resultSection">
      <h2>Prediction Result</h2>
      <canvas id="resultChart" width="300" height="300"></canvas>
      <p id="resultText"></p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const form = document.getElementById('predictionForm');
    const resultSection = document.getElementById('resultSection');
    const resultText = document.getElementById('resultText');
    const ctx = document.getElementById('resultChart').getContext('2d');
    let chart;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = {
        age: Number(form.age.value),
        sex: Number(form.sex.value),
        cp: Number(form.cp.value),
        bp: Number(form.bp.value),
        chol: Number(form.chol.value),
        fbs: Number(form.fbs.value),
        restecg: Number(form.restecg.value),
      };

      // TODO: Replace this with real API call to your backend ML model.
      // Example:
      // const response = await fetch('/predict', { method: 'POST', body: JSON.stringify(formData), headers: {'Content-Type': 'application/json'} });
      // const prediction = await response.json();

      // Simulated prediction for demonstration:
      const hasHeartDisease = Math.random() > 0.5 ? 1 : 0;
      const probability = Math.random();

      displayResult({ hasHeartDisease, probability });
    });

    function displayResult({ hasHeartDisease, probability }) {
      resultSection.style.display = 'block';

      const probPercent = (probability * 100).toFixed(1);
      if (hasHeartDisease === 1) {
        resultText.textContent = `High risk of heart disease. Probability: ${probPercent}%`;
      } else {
        resultText.textContent = `Low risk of heart disease. Probability: ${(100 - probPercent).toFixed(1)}%`;
      }

      const data = {
        labels: ['No Heart Disease', 'Heart Disease'],
        datasets: [{
          label: 'Risk Probability',
          data: hasHeartDisease === 1 ? [100 - probPercent, probPercent] : [probPercent, 100 - probPercent],
          backgroundColor: ['#4caf50', '#f44336']
        }]
      };

      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'doughnut',
        data,
        options: {
          cutout: '70%',
          plugins: {
            legend: { position: 'bottom' }
          }
        }
      });
    }
  </script>
</body>
</html>